"use strict";(self.webpackChunkbaked_docs=self.webpackChunkbaked_docs||[]).push([[1064],{1389:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var o=t(4848),a=t(8453);const s={title:"Exploring 'knobChanged'",authors:["cameron"],tags:["nuke","scripting"]},i=void 0,r={permalink:"/baked-docs/blog/2024/01/15/2024-01-15-knob-changed/knob-changed",source:"@site/blog/2024-01-15-knob-changed/2024-01-15-knob-changed.md",title:"Exploring 'knobChanged'",description:"A foray into the knobChanged function in Nuke.",date:"2024-01-15T00:00:00.000Z",tags:[{inline:!0,label:"nuke",permalink:"/baked-docs/blog/tags/nuke"},{inline:!0,label:"scripting",permalink:"/baked-docs/blog/tags/scripting"}],readingTime:3.605,hasTruncateMarker:!0,authors:[{name:"Cameron Target",title:"Pipeline Manager",url:"https://www.wearebaked.com/about",imageURL:"https://avatars.githubusercontent.com/u/127965975?s=400&u=9799eb0c2c2b7bcf45f47bb170c8a154fd4e7eb4&v=4",key:"cameron",page:null}],frontMatter:{title:"Exploring 'knobChanged'",authors:["cameron"],tags:["nuke","scripting"]},unlisted:!1,prevItem:{title:"Tidbyt Status Monitor",permalink:"/baked-docs/blog/2024/01/25/2024-01-25-tidbyt/tidbyt"},nextItem:{title:"Release | v0.4.4-bakedstudios.0.4.1",permalink:"/baked-docs/blog/2023/12/31/2023-12-31-config-release-notes/config-release-notes"}},c={authorsImageUrls:[void 0]},l=[{value:"Intro",id:"intro",level:2},{value:"Part 1: KnobChanged",id:"part-1-knobchanged",level:2},{value:"Part 2: Nuke Python Callbacks",id:"part-2-nuke-python-callbacks",level:2},{value:"What is a Callback?",id:"what-is-a-callback",level:3},{value:"Why Use Callbacks in Nuke?",id:"why-use-callbacks-in-nuke",level:3},{value:"Part 3: Built in Artist-Friendly Callback Knobs",id:"part-3-built-in-artist-friendly-callback-knobs",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"A foray into the knobChanged function in Nuke."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"intro",children:"Intro"}),"\n",(0,o.jsx)(n.p,{children:"So you're trying to update the value of one knob when the value of another changes. This functionality in Nuke is enabled by the knobChanged knobs that are hidden, but included, in most nodes. If you want to attach a script to a knobChanged knob, and also keep it when you save and reopen your Nuke script later, this guide's for you."}),"\n",(0,o.jsx)(n.h2,{id:"part-1-knobchanged",children:"Part 1: KnobChanged"}),"\n",(0,o.jsx)(n.p,{children:'Nodes in Nuke obviously have a variety of controls, but some are visible and some not. One hidden control is known as "knobChanged." Typically, this control starts empty, but you can attach a script or code to it. The attached code will execute whenever a designated knob\u2014or even all knobs\u2014undergo changes.'}),"\n",(0,o.jsxs)(n.p,{children:["Here's an example script you can attach to a ",(0,o.jsx)(n.code,{children:"knobChanged"})," knob in your selected node:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sel = nuke.selectedNode()\nsel.knob('knobChanged').setValue('print(\"Knob has changed!\")')\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Where ",(0,o.jsx)(n.code,{children:"sel = nuke.selectedNode()"}),": selects the currently active node in Nuke and stores it in the variable ",(0,o.jsx)(n.code,{children:"sel"})," - and ",(0,o.jsx)(n.code,{children:"sel.knob('knobChanged').setValue('print(\"Knob has been changed!\")')"})," accesses the 'knobChanged' attribute of the selected node and sets its value to execute the print statement whenever a knob changes."]}),"\n",(0,o.jsx)(n.p,{children:"This is a simple set up, but it creates a lot of potential. Accessing the hidden knob allows the automation of triggers when all sorts of user interactions happen on the selected node."}),"\n",(0,o.jsx)(n.p,{children:"If you get the idea, feel free to move on, if you want to read more about knobChanged:"}),"\n",(0,o.jsx)(n.p,{children:"further reading:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://benmcewan.com/blog/2018/04/09/using-knobchanged-to-toggle-knob-states-on-gizmos/",children:"https://benmcewan.com/blog/2018/04/09/using-knobchanged-to-toggle-knob-states-on-gizmos/"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://splitthediff.com/knob-changed",children:"https://splitthediff.com/knob-changed"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"part-2-nuke-python-callbacks",children:"Part 2: Nuke Python Callbacks"}),"\n",(0,o.jsx)(n.h3,{id:"what-is-a-callback",children:"What is a Callback?"}),"\n",(0,o.jsx)(n.p,{children:"In Python, a callback is essentially a function that you can pass as an argument to another function. This allows the code to be more dynamic and be executed when a specific event occurs. In Nuke, a callback is often used to trigger specific Python scripts when certain actions or events take place, like when a node is created or modified."}),"\n",(0,o.jsx)(n.h3,{id:"why-use-callbacks-in-nuke",children:"Why Use Callbacks in Nuke?"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Workflow Automation"}),": You can automate repetitive tasks, like setting default values for nodes or auto-connecting nodes together."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"User Alerts"}),": You can set up alerts to notify you of certain changes or requirements, like warning you if a node's settings surpass a particular threshold."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Quality Control"}),": Automate checks for naming conventions or specific settings that need to be maintained across a project."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"part-3-built-in-artist-friendly-callback-knobs",children:"Part 3: Built in Artist-Friendly Callback Knobs"}),"\n",(0,o.jsx)(n.p,{children:"One of the challenges in Nuke is assigning a script like the one above to a knob 'permanently' so it stays with the script. Often, if you use the script editor, for example, to assign something to a knob, it'll only be included in that session. Unfortunately, Nuke scripts don't let you hardcode python directly into them, you have to either keep a .py script with your script or you have to find another way. Enter Nuke Python callback knobs."}),"\n",(0,o.jsx)(n.p,{children:"For the intro gif, here's the script that makes that work, let's use it as an example."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# The function that you want added to the knob\ndef kc_func():\n    n = nuke.thisNode()\n    k = nuke.thisKnob()\n    if k.name() in ( \"nameScheme_project\", 'nameScheme_sequence', 'nameScheme_shot', 'nameScheme_task', 'nameScheme_BKD', 'nameScheme_version'):\n        new_value = nuke.tcl('value nameScheme_string')\n        n.knob('nameScheme_preview').setValue(new_value)\n        return f\"Changed nameScheme_preview to {new_value}\"\n\n# Find the node by name and set the knobChanged\nnode = nuke.toNode(\"BKD_Renderer1\")\nif node:\n    node.knob('knobChanged').setValue('kc_func()')\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This slighly more complex python script updates the knob ",(0,o.jsx)(n.code,{children:"nameScheme_preview"})," when a set of other knobs on the node are updated. While this script essentially listens for any changes to those knobs, it still ",(0,o.jsx)(n.strong,{children:"needs to be run in the first place"}),", specifically the function in the script needs to be added to the knobChanged knob in the BKD_Renderer1 node. If the purpose is to avoid using a python button for example to trigger your changes, we'll want to have the python script run when the Nuke script is opened. This is made easy with the callback knob included in Project Settings / Python/ ",(0,o.jsx)(n.code,{children:"nuke.addOnScriptLoad()"}),". This is a really user-friendly interface with a field where you can simply copy and paste the script you'd like to have run on script load."]}),"\n",(0,o.jsx)(n.p,{children:"So that's kind of it for this example. It's small it scope, but can pack a punch if extrapolated to other circumstances."}),"\n",(0,o.jsxs)(n.p,{children:["Here's more about the Artist friendly callback knobs in nuke:\n",(0,o.jsx)(n.a,{href:"https://www.youtube.com/watch?v=CBaU5ZvZlXI",children:"https://www.youtube.com/watch?v=CBaU5ZvZlXI"})]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(6540);const a={},s=o.createContext(a);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);